name: Check for Change Log

on:
  pull_request:

jobs:
  check-change-log:
    name: Check Change Log
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v2.3.4
      - name: Set up Python
        uses: actions/setup-python@v2.2.2
        with:
          python-version: 3.7
      - name: Check for Change Log entry
        env:
          BASE_BRANCH: ${{ github.base_ref }}
        run: |
          # Fetch the pull request' base branch so towncrier will be able to
          # compare the current branch with the base branch.
          # Source: https://github.com/actions/checkout/#fetch-all-branches.
          # git fetch --no-tags origin +refs/heads/${BASE_BRANCH}:refs/remotes/origin/${BASE_BRANCH}
          # towncrier check --compare-with origin/${BASE_BRANCH}
          echo "BASE_BRANCH == ${{ BASE_BRANCH }}"
